<template>
    <div class="recipe-detail-overview overview col-12">
        <alert :classes="alert.type" :text="alert.text" v-if="alert.text"/>
        <div v-if="recipe.id">
            <div class="row">
                <div class="col-12 col-md-5">
                    <div class="recipe-detail-mobile d-md-none">
                        <div class="recipe-user-info d-flex justify-content-between align-items-center"> 
                            <div class="d-flex align-items-center">
                                <div class="recipe-user-info-img">
                                    <img
                                        v-if="user.profilePictureName"
                                        :src="'/images/profile_pictures/' + user.profilePictureName"
                                    />
                                </div>
                                <div class="recipe-user-info-name">
                                    <span>Made by {{ user.username }}</span>
                                </div>
                            </div>
                            <div class="recipe-like" @click="toggleLikeRecipe" :class="{ active: likedRecipe }" v-if="isUserLoggedIn">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-heart" width="30" height="30" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ffffff" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                                    <path d="M19.5 13.572l-7.5 7.428l-7.5 -7.428m0 0a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572" />
                                </svg>
                            </div>
                            <div v-else>
                                <button class="btn btn-like-recipe" data-bs-toggle="modal" data-bs-target="#likeRecipeLoginMobileModal">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-heart" width="30" height="30" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ffffff" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                                        <path d="M19.5 13.572l-7.5 7.428l-7.5 -7.428m0 0a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572" />
                                    </svg>  
                                </button>
                                <div class="modal fade weekly-plan-modal" id="likeRecipeLoginMobileModal" tabindex="-1" aria-labelledby="likeRecipeLoginMobileModalLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                        <modal-login-content v-if="!isUserLoggedIn" headline="Login to like this recipe" />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="recipe-headline">
                            <h2> {{recipe.name }}</h2>
                        </div>
                        <div class="recipe-time-difficulty d-flex align-items-center">
                            <div class="recipe-time" v-if=" recipe.prepTime">
                                <span>Time: {{recipe.prepTime }}</span>
                            </div>
                            <div class="recipe-difficulty" v-if=" recipe.difficulty">
                                <span>Difficulty: {{recipe.difficulty }}</span>
                            </div>
                        </div>
                    </div>
                    <div class="recipe-image-preview">
                        <img
                            v-if="recipe.imageName"
                            :src="'/images/recipe_pictures/' + recipe.imageName"
                        />
                        <img src="../../../img/placeholder.jpg" v-else />
                    </div>
                </div>
                <div class="col-12 col-md-7 d-flex flex-column ">
                    <div class="recipe-user-info d-none d-md-flex justify-content-between align-items-center"> 
                        <div class=" d-flex align-items-center">
                            <div class="recipe-user-info-img">
                                <img
                                    v-if="user.profilePictureName"
                                    :src="'/images/profile_pictures/' + user.profilePictureName"
                                />
                            </div>
                            <div class="recipe-user-info-name">
                                <span>Made by {{ user.username }}</span>
                            </div>
                        </div>
                        <div class="recipe-like" @click="toggleLikeRecipe" :class="{ active: likedRecipe }" v-if="isUserLoggedIn">
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-heart" width="30" height="30" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ffffff" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                                <path d="M19.5 13.572l-7.5 7.428l-7.5 -7.428m0 0a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572" />
                            </svg>
                        </div>
                        <div v-else>
                            <button class="btn btn-like-recipe" data-bs-toggle="modal" data-bs-target="#likeRecipeLoginModal">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-heart" width="30" height="30" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ffffff" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                                    <path d="M19.5 13.572l-7.5 7.428l-7.5 -7.428m0 0a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572" />
                                </svg>  
                            </button>
                            <div class="modal fade weekly-plan-modal" id="likeRecipeLoginModal" tabindex="-1" aria-labelledby="likeRecipeLoginModalLabel" aria-hidden="true">
                                <div class="modal-dialog">
                                    <modal-login-content v-if="!isUserLoggedIn" headline="Login to like this recipe" />
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="recipe-headline d-none d-md-block">
                        <h2> {{recipe.name }}</h2>
                    </div>
                    <div class="recipe-time-difficulty d-none d-md-flex align-items-center">
                        <div class="recipe-time" v-if=" recipe.prepTime">
                            <span>Time: {{recipe.prepTime }}</span>
                        </div>
                        <div class="recipe-difficulty" v-if=" recipe.difficulty">
                            <span>Difficulty: {{recipe.difficulty }}</span>
                        </div>
                    </div>
                    <div class="recipe-tags d-flex align-items-center flex-wrap">
                        <div class="recipe-tag" v-for="(tag, index) in recipe.tags">
                            {{ tag.name }}
                        </div>
                    </div>
                    <div class="recipe-weeklyplan-btn">
                        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#weeklyPlanModal">Add to weekly plan</button>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12 col-md-5 accordion">
                    <div class="recipe-ingredients accordion-item">
                        <div class="recipe-ingredients-mobile-headline d-md-none accordion-header collapsed" id="headingIngredients"  data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                            <h3>Ingredients</h3>
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                <path fill="none" d="M0 0h24v24H0V0z"/>
                                <path class="plus-minus-path" fill="none" stroke="rgb(255,255,255)" stroke-dasharray="0 0 0 0" stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M12 7v10"/>
                                <path fill="none" stroke="rgb(255,255,255)" stroke-dasharray="0 0 0 0" stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M7 12h10"/>
                            </svg>
                        </div>
                        <div id="collapseOne" class="recipe-ingredients-mobile-content accordion-collapse collapse" aria-labelledby="headingIngredients" data-bs-parent="#accordionExample">
                            <h3>Portion</h3>
                            <div class="recipe-portion d-flex">
                                <div class="col-3 col-md-auto">
                                    <a class="btn btn-primary" @click="removePortion">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-minus" width="36" height="36" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ffffff" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                                        <line x1="5" y1="12" x2="19" y2="12" />
                                    </svg>
                                    </a>
                                </div>
                                <div class="col-3 col-md-auto">
                                    <input
                                    type="number"
                                    class="add-recipe-ingredient-portion form-control"
                                    :placeholder="recipe.portion"
                                    v-model="recipe.portion"
                                    @change="updatePortion()"
                                    />
                                </div>
                                <div class="col-3 col-md-auto">
                                    <a class="btn btn-primary" @click="addPortion">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-plus" width="36" height="36" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ffffff" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                                        <line x1="12" y1="5" x2="12" y2="19" />
                                        <line x1="5" y1="12" x2="19" y2="12" />
                                    </svg>
                                    </a>
                                </div>
                            </div>
                            <h2 class="d-none d-md-block">Ingredients</h2>
                            <div class="recipe-ingredient d-flex" v-for="(ingredient, index) in recipe.ingredients">
                                <span class="recipe-ingredient-quantity">{{ ingredient.quantity }} {{ ingredient.unit }} </span>
                                <span class="recipe-ingredient-name"> {{ ingredient.name }}</span>
                            </div>
                            <div class="recipe-ingredients-bg">
                                <svg xmlns="http://www.w3.org/2000/svg" width="243.309" height="263.48" viewBox="0 0 243.309 263.48">
                                    <g>
                                        <g opacity=".32">
                                        <path fill="rgb(255,255,255)" fill-rule="evenodd" d="M117.73356164 121.05012767c-1.76739502-8.38806152-2.53167725-16.33728027-.76428223-24.3840332 3.72589111-16.72735596 14.99908447-25.55432129 28.70837402-30.87005615 14.37805176-5.55950928 33.0074463 2.29211426 40.31591797 16.87371826 4.20355225 8.29052734 7.73834229 17.36132812 8.31158447 27.21252441.66876221 12.67956543-4.77679443 21.89672852-14.33032226 28.3828125-8.59814453 5.94970703-18.1994629 6.04724121-28.18292237 4.92565918-7.92944335-.92663574-14.99902343-3.46252441-21.11328125-8.58325195-4.58569335-3.85266113-8.64599609-8.68066406-12.94506835-13.55737305zm8.02496337.92651368c4.44238282 6.92504882 9.8400879 13.4111328 17.57849122 15.2644043 7.06958007 1.65808105 14.71240234 1.75561523 22.06866455 1.02404784 13.23162841-1.26794433 23.3106079-8.87573242 24.3137207-25.4567871 0-.43896485-.52545166-1.07287598-.76428223-1.56054688-.19104004.3413086-.33435058.8289795-.57318115 1.17041016-3.00939941 5.21813964-5.7321167 10.68017578-9.41027832 15.3618164-1.57629395 1.99951172-5.15887451 2.48718262-7.8338623 3.26745606-.59942627.13598632-1.31506348-.32067871-2.00115967-.75842286-.2979126-.19006347-.59014893-.3765869-.8649292-.50952148.76428222-.8289795 1.33752441-2.0970459 2.29284668-2.38964844 5.63659668-1.80432129 8.93255615-6.58361816 11.84637451-11.4116211 1.2420044-2.09704589 2.10180664-6.58374023 1.19421387-7.41271972-2.09783936-1.91870117-1.9963379-3.91894531-1.89068604-6.00097656.00976563-.19348145.01965332-.38769531.027771-.5826416.22509765-4.22851563-2.01068115-6.89764404-4.30810547-9.64031983-.14025879-.16741943-.28070068-.33514404-.42089844-.503479-1.09869385-1.26794434-2.00622558-2.63342285-3.00939941-3.95019531 1.76745605.29260254 3.72589111.34136963 5.39776611 1.07287597.90759277.34143067 1.9584961 1.46307374 2.29284668 2.53594971 1.52856445 4.4866333 2.77050781 9.0220337 4.29907227 13.50872803.42993164 1.17041016 1.33752441 2.0970459 2.00628662 3.21862793.1361084-.37060547.32019043-.74621582.50360107-1.1204834.39581299-.80773926.78845215-1.60900879.69055176-2.34204102-.23883057-2.8284912-.6687622-5.65698242-1.57629395-8.29052734-1.43304443-3.65753174-3.43927002-6.9249878-4.96783447-10.58258057-2.86608887-7.41271972-7.49957275-12.04571533-15.23791504-12.33831787-.90759277-.09753418-1.9584961-.29260254-2.6749878-.73150634-6.16204833-3.95019532-13.04058837-4.4866333-19.20257567-2.09698487-12.46740723 4.82800293-22.06866456 12.77716065-24.74365235 28.7730713-.80773926 4.8005371.2485962 8.87194823 1.28582764 12.86950683.68023681 2.6217041 1.35223389 5.21154785 1.48468017 7.9543457-.09552002.58520508.85980225 1.1217041 2.19732666 1.65808106zm63.24438477-11.99682618c-.19110107-.1463623-.33435059-.24389648-.52545166-.34143066.36138916-.16394043.41900635.01660156.48492432.2232666.0125122.03918457.02526855.07922363.04052734.11816406z"/>
                                        <path fill="rgb(255,255,255)" fill-rule="evenodd" d="M142.19060463 79.06089993c-4.5379296 5.46200392-9.02809152 10.58263258-12.56289985 16.43477963-3.3437376 5.65707548-3.77364672 12.04566934-.19107072 18.19042374.66874752 1.02412574 1.24195968 2.09701936 1.6718688 3.26744877.19107072.6339826-.19107072 1.46303676-.2388384 2.09701936-.57321216-.19507157-1.33749504-.29260735-1.6718688-.73151838-3.86918208-4.38911029-5.20667712-9.65604263-4.96783872-15.80079703.2388384-6.8275049 2.8660608-12.24074091 6.97408128-16.87369066 3.00936385-3.26744877 6.63970753-6.04721861 10.17451585-8.87575635.66874752-.53644682 2.10177792.09753578 3.29596992.09753578-.7165152.73151838-1.4330304 1.46303676-2.48391936 2.19455514"/>
                                        <path fill="rgb(255,255,255)" fill-rule="evenodd" d="M142.33390767 132.65681332c-1.00312128-1.02412574-2.19731328-1.65810833-2.67499008-2.63346617-.52544448-1.17042941-.52544448-2.73100196-.76428288-4.09650294 1.00312128.53644681 2.10177792.92658995 2.96159616 1.65810833 4.5379296 4.19403872 9.84014209 3.95019926 15.3334253 3.26744877 1.194192-.19507157 2.53168704-.92658995 3.43927296-.53644681 1.86293952.73151838 3.3437376 1.99948357 5.06337408 3.12114509-1.57633344.43891103-3.29596992 1.36550098-4.87230336 1.2679652-6.11426305-.48767893-12.41959681 1.70687622-18.48609218-2.04825147"/>
                                        <path fill="rgb(255,255,255)" fill-rule="evenodd" d="M159.86464625 82.71849184c-2.77052545-1.02412573-5.06337409-1.804412-7.26068737-2.92607353-.42990912-.19507156-.85981824-1.02412573-.85981824-1.56057254.09553536-.34137525.90758592-1.07289363 1.194192-1.02412573 5.82765696 2.09701935 12.8972736-.43891103 17.53073857 5.65707548.52544448.5364468.76428288 1.36550097 1.09865664 2.09701935-.76428288.19507157-1.57633344.43891103-2.34061632.34137525-.76428288 0-1.4330304-.53644681-2.19731328-.73151838-2.29284864-.6827505-4.58569728-1.2191973-7.165152-1.8531799"/>
                                        <path fill="rgb(255,255,255)" fill-rule="evenodd" d="M136.26743615 96.12971752c-.14331055.92651367.2866211 1.99938965.85980224 3.02355957 2.34063721 2.8284912 4.77679444 4.58422851 8.1204834 3.51135254.6687622-.29260254 1.48083496-2.38964844 1.2420044-2.82861328-1.62414551-2.19458008-3.53485108-4.19403077-5.39776612-6.19348145-.95532226-.87786865-1.9584961-1.70690918-2.96160888-2.5359497-.62097168 1.75561523-1.4329834 3.26745605-1.86291504 5.02313232zm3.96466064-.43896485c.04779053 1.02416993.14331055 1.99951172.2388916 3.02355957-.76428222-.4876709-1.09869384-1.31665039-1.33752441-2.194458 0-.19506836.76428223-.53649903 1.09863281-.82910157z"/>
                                        <path fill="rgb(255,255,255)" fill-rule="evenodd" d="M160.6766968 97.30009157c1.76740417-2.19455515 3.43927297-4.09650294 5.54105089-5.36446813 1.194192-.6339826 3.1048992-.53644681 1.24195968 2.19455514-1.86293952 2.63346617-3.20043456 5.75461127-4.776768 8.6806848-.42990912.73151837-1.09865664 1.1704294-1.6718688 1.7556441-.42990912-.92658994-1.194192-1.7556441-1.194192-2.63346617.04776768-1.41426887.52544448-2.77976984.85981824-4.63294974"/>
                                        <path fill="rgb(255,255,255)" fill-rule="evenodd" d="M167.4119397 104.61527538c3.3437376-1.2679652 6.40086912-2.4871625 9.50576832-3.56005612.19107072-.09753579.66874752 1.02412573 1.09865664 1.65810833-3.3437376 1.804412-6.54417217 4.2915745-10.07898049 5.31570023-2.19731328.73151838-3.05713152-1.41426887-.52544448-3.41375244"/>
                                        <path fill="rgb(255,255,255)" fill-rule="evenodd" d="M143.86247343 111.93045919c-2.77052544.92658995-5.06337408 1.99948357-7.4039904 2.63346617-.76428288.19507157-1.86293952-.92658995-2.67499008-1.36550098.57321216-.6339826 1.09865664-1.56057254 1.76740416-1.804412 2.53168704-1.17042941 5.06337408-2.63346618 7.6428288-2.92607353 2.43615168-.29260735 3.1048992 1.36550098.66874752 3.46252034"/>
                                        <path fill="rgb(255,255,255)" fill-rule="evenodd" d="M150.74101936 98.86066411c-.52544448-2.82853774-.90758592-5.36446812-.90758592-7.9491664 0-.92658995 1.194192-1.80441201 1.86293952-2.73100196.42990912.73151838 1.194192 1.56057255 1.33749504 2.38962671.42990912 2.73100196.76428288 5.46200391.85981824 8.24177376 0 .73151838-1.00312128 1.46303676-1.57633344 2.19455514-.4776768-.68275048-.90758592-1.31673308-1.57633344-2.14578725"/>
                                        <path fill="rgb(255,255,255)" fill-rule="evenodd" d="M174.3382533 117.58753467c-2.77052545-.34137525-5.39774785-1.02412574-7.92943489-1.75564412-.57321216-.19507156-1.00312128-1.02412573-1.52856576-1.46303676.57321216-.53644681 1.24195968-1.56057254 1.76740416-1.46303676 2.8660608.34137524 5.7321216.92658995 8.5981824 1.65810833.76428289.19507157 1.4330304 1.02412573 2.19731329 1.56057255-1.00312128.39014313-1.95847488.82905416-3.1048992 1.46303676"/>
                                        <path fill="rgb(255,255,255)" fill-rule="evenodd" d="M164.21150513 120.80621554c.52544448.92658995.66874752 1.56057255 1.09865664 2.09701936.57321216.82905417 1.33749504 1.46303677 2.10177792 2.19455515-.90758592.43891103-1.86293952 1.36550097-2.77052544 1.36550097-1.09865664-.09753578-2.19731328-.82905416-3.1048992-1.46303676-.42990912-.19507157-.66874752-.92658995-.66874752-1.46303676-.09553536-2.29209093 0-4.58418185 0-6.778737 1.00312128 1.31673309 2.10177792 2.58469828 3.3437376 4.04773504"/>
                                        <path fill="rgb(255,255,255)" fill-rule="evenodd" d="M149.49905968 117.14862364c.76428288-.19507157 1.86293952-.19507157 1.86293952-.09753578 0 2.4871625.42990912 5.02309288-.2388384 7.3151838-.33437376 1.07289363-2.67499008 1.46303677-4.0602528 2.19455515 0-1.07289363-.09553536-2.29209093.19107072-3.26744877.57321216-2.04825147 1.33749504-3.95019926 2.24508096-6.1447544"/>
                                        <path fill="rgb(255,255,255)" fill-rule="evenodd" d="M153.12940336 109.19945723c1.57633344-.53644681 3.20043456-.6339826 4.776768-.73151838l-1.00312128 4.38911029c-1.24195968-1.12166152-2.53168704-2.19455515-3.77364672-3.6575919"/>
                                        <path fill="rgb(255,255,255)" fill-rule="evenodd" d="M159.004828 75.40330803c1.33749505-.82905417 2.77052545-1.07289363 4.20355585-1.36550098.09553536 0 .33437376.82905417.52544448 1.17042941-1.62410112.29260735-3.20043456.48767892-4.72900033.19507157"/>
                                        </g>
                                        <g opacity=".3" transform="rotate(-65.000023 77.39651351 183.73035063)">
                                        <path fill="rgb(255,255,255)" fill-rule="evenodd" d="M97.29081498 148.56933988c1.57055664.48425293 3.09747315.92443848 4.66796875 1.40856934-1.3959961-.8803711-2.87927246-1.67260742-4.10083007-2.72912598-.65441895-.39611816-1.09063721-.9243164-1.70141602-1.49658203.74163818-.44018555 1.3959961-1.23254394 2.22491455-1.32055664 4.01361084-.57226562 6.58758545 1.40856934 5.84588623 4.40185547-.08721924.48413086-1.17785644.70422363-1.91955566 1.27648926-.43743897 2.53808593-2.06304932 2.30969238-3.45111084 2.1147461-.27301026-.03833009-.5368042-.07543946-.78057862-.08984376-5.84594726-.08813476-11.16827392 1.18847656-15.61816406 5.59033203-.34899902.39611817-.6107788.9243164-.95977783 1.32055664.22912598.0164795.46435547.07629395.69647217.13537598.38677978.09838867.76507568.19470215 1.09222412.08459473 1.5704956-.52819825 3.14105224-1.0123291 4.53710937-1.8046875 4.05718994-2.02478028 8.4197998-2.42102051 12.86968994-2.02478028 1.5269165.04394532 3.01019288.83630371 4.58074952 1.32043457.1744995-1.40856933.30535888-2.90515136.52349853-4.3137207.30541992-2.4210205.69799805-4.9741211 1.04699707-7.3951416.13092041-1.0123291.52355957-1.9807129.74169922-2.99316406.87249756.70422363 2.26855469 1.23254394 2.57391357 2.11279296.15240479.50317383.31793213 1.00195313.48309327 1.49938965.87512207 2.63598633 1.73834228 5.23632813.56396484 8.27270508-.32971191.73181152.73571777 2.11706543 1.69012451 3.3581543.30865479.40136719.60565186.78759765.84014893 1.13171387.04364013.17614746 1.5269165-.30810547 1.61419677-.61621094.1369629-.66601563.34509278-1.38220215.55523682-2.10559082.52612305-1.81079102 1.06530762-3.66662598.5354004-4.89331055-3.62097169-7.79125977-7.19830323-15.9786377-14.74560548-20.46850586-.18737793-.10803223-.37530517-.21716308-.5639038-.32653808-3.49945069-2.0308838-7.2154541-4.18737793-11.52056885-2.18249512-.61071778.30810547-1.04699707.8363037-1.48327637 1.32055664.4362793.30810547.8725586.83630371 1.39605713 1.0123291 1.61413574.30822754 3.27191162.39624023 4.8861084.7923584 4.71160888 1.27648926 8.50708008 4.09375 10.86291504 8.75964355.27893066.56298828-.01287842 1.41381836-.3166504 2.29956055-.17126464.49938965-.34631347 1.0098877-.42498779 1.48596191-2.22497558-1.05639648-4.75524902-1.67260742-6.58752441-3.16931152-8.11450195-6.69067383-17.6685791-9.11169434-27.5281372-9.99206543-7.3291626-.616333-14.4838257 0-21.90026856 3.477417-13.13146973 6.16259765-23.47085572 14.34997558-27.48446656 29.44824218-.55630493 2.08691406-1.41577148 4.07971191-2.27645874 6.07531738-1.77163696 4.10778809-3.54840088 8.22753907-2.69689941 13.20471192.25289917 1.54455566.34335327 3.10961914.4336853 4.67260742.20574951 3.55969238.41085816 7.10876465 2.53286743 10.3815918 1.26516724 1.98083496 1.39605713 4.79797363 2.35583497 7.17504882.65438842 1.8046875 1.57052612 3.60949707 2.66119384 5.1060791 3.18469239 4.09375 6.5439148 8.09936524 9.85949707 12.10498047 3.18469239 3.69763184 5.84588623 9.1558838 9.7722168 10.56445313 6.28216553 2.28894043 11.7354126 6.91088867 18.7156372 7.08691406 2.13775635.07946778 4.27941895.21850586 6.41918946.35742188 4.97784424.32324218 9.94494629.64575195 14.8267212.21484375 5.40960693-.48425293 10.68841552-2.99328614 15.92352294-4.66601563.6107788-.2199707 1.57055664-1.0123291 1.57055664-1.1003418-1.4121704-3.0484619.21643067-3.42797851 1.83380127-3.80493164.53118897-.12365722 1.0610962-.24719238 1.48175049-.46484375.6107788-.30822753 1.352417-.5283203 1.78869629-1.01245117 3.31555176-3.74157715 6.71838379-7.43908691 9.7722168-11.35668945 2.09405517-2.64111328 4.75524902-5.6784668 4.97338867-8.75964355.4362793-4.93005372 3.18469238-6.99890137 6.67480468-8.80371094 7.72180176-3.91760254 6.8493042-16.59484864 1.352417-20.38049317-2.31219483-1.58459472-4.79888916-2.5970459-4.8861084-6.07446289 0-.39624023-.65441895-.7043457-.95977783-1.10046386-.13092041.52819824-.13092041 1.01245117-.34906006 1.40856933-1.88458252 3.63781738.50158691 5.52856445 2.56964111 7.16723633.13409424.10620117.2668457.21142578.39697266.31591797 6.80566406 5.59033203 5.3223877 11.53271484.08721924 16.55078125-.52349854.57226562-1.352417.8803711-2.0067749 1.27661133-.17449952-.7923584-.3053589-1.4967041-.3053589-2.28894043.21807862-6.11853028 0-11.97302246-5.10430908-16.28686524-1.13427734-.8363037-1.48327636-2.72912597-2.31213378-4.00561523-.65441895-.92443848-1.57055665-1.84875488-2.4430542-2.4210205-.74169922-.44018556-1.70147705-.44018556-2.57397461-.61621095.4362793.74829102.65441894 1.8046875 1.26513672 2.42102051 2.1376953 1.98083496 3.40283203 5.06201172 2.00683593 7.08691406-1.35241699 1.93676758-4.44989013 2.72912598-6.98016357 3.52148438-2.96661377 1.0123291-6.06402588 1.40856933-9.11785889 2.20092773-.78527832.1760254-1.39605713.79223633-2.13769531 1.27648926.23028564.14196777.45684814.31811523.68292236.49377441.54486084.42346192 1.08709717.8449707 1.6729126.78271485 6.8928833-.39611817 14.09118652-.22009278 19.19543457-6.60266113.22790527-.2956543.8685913-.24816895 1.45111084-.20495606.19818115.01464844.3895874.0288086.5557251.0288086-.4362793 2.28894042-.30541992 5.06213378-1.48327637 6.77880859-1.65783691 2.3770752-4.23175049 3.91760254-6.45666504 5.8984375-.30541992.22009277-.39263916.7043457-.6107788 1.10046387.11029052.02233886.23449706.05578613.36346435.09057617.38134766.10290527.80438232.21704101 1.03259277.08557129 2.09399414-1.5847168 4.14447022-3.12536621 6.2385254-4.79797364.43621825-.39624023.82885741-1.01245117 1.17785644-1.4967041.05871582.1776123.1331787.36169434.20812988.546875.20373535.5032959.41107178 1.015625.31542969 1.43395996-.9161377 4.79797364-1.4833374 9.81604004-3.053833 14.39404297-1.352417 3.82958985-3.49011231 7.52709961-5.93316651 10.69641113-1.91955567 2.5970459-4.84246826 4.48986817-7.41644287 6.47070313-1.48327637 1.10046387-3.62097168 1.23254394-5.10424805 2.4210205-5.36602783 4.44580079-11.47369385 7.04284669-17.93035889 7.96728516-12.25891113 1.89282227-24.1251831-.7923584-34.85723877-7.17504882-4.01361084-2.33288575-6.93652343-6.82275391-9.99035644-10.69641114-2.35583496-2.99328613-4.58074951-6.38269043-5.84591675-9.9921875-2.53030396-7.26293945-4.44985962-14.79003906-6.36941528-22.36120605-.16168213-.6525879-.34887696-1.33093262-.53955079-2.02197266-.83834838-3.038208-1.74502563-6.3239746-.85647583-8.76257324 2.87930298-8.23132324 7.19830323-16.022583 13.69857789-21.7890625.72937011-.64160156 1.45251464-1.30566406 2.1786499-1.97241211 4.35498047-3.9991455 8.81542969-8.09521484 15.35906982-8.01965332.30230713.06103516.64648438-.25854492.97454834-.56298828.1453247-.1348877.28753662-.2668457.42144776-.3614502-.61071778-.26403808-1.17785645-.57226562-1.78863526-.57226562-.51617431.0612793-1.10095215.23449707-1.67541504.40466308-1.07641601.31884766-2.11639404.62683106-2.59997558.16760254-1.70135498-1.51708984-2.82855225-.82543945-4.130188-.02685547-.13354491.08190918-.26892089.16503907-.40692138.24694825-7.54730224 4.31384277-13.04418945 10.96057129-17.93029785 18.26757812-.4362793.7043457-.82891846 1.4967041-1.26516724 2.20092774-.04278564-.35961914-.1321411-.74267579-.22088623-1.12329102-.1828308-.78381348-.36309814-1.55664062-.12811279-2.09008789 1.8322754-3.3894043 3.75183106-6.7788086 6.06402588-9.85998535 1.17788696-1.6727295 3.09744263-2.77319336 4.580719-4.2697754.32470702-.32348632.64331054-.64819335.95916747-.9699707 3.07946778-3.13757324 5.89526368-6.00646972 11.4743042-4.92858886 3.46337891.70507812 7.18066407-.14819336 10.88659668-.99890137 1.61572266-.3708496 3.22930909-.741333 4.81878662-.98181152.65441895-.04406739 1.22155762-.39624024 1.8322754-.61633301-.65435792-.57226563-1.352417-1.58459473-2.0067749-1.6727295-2.2576294-.13208007-4.58892823-.1154785-6.92022706-.09899902-.77703857.00549317-1.55413818.01098633-2.3284912.01098633-1.17791749 0-2.35583497-.22009277-3.53375245-.39611816 1.26519775-.61621094 2.35583496-1.49658203 3.70825195-1.89282227.20043946-.06359863.40765381-.13244629.61950684-.20288086 1.40161133-.46582031 3.0045166-.99853515 4.17932129-.50134277 7.32922363 3.08117676 16.01080322.66027832 22.81646728 6.07446289.40338135.3112793 1.0649414.12768555 1.77404785-.06921387.59454346-.16491699 1.22247315-.3392334 1.7597046-.2388916 2.70477294.48425293 5.45324706 1.27648926 8.20166015 1.98083496.47991943.1760254.91619873.57226563 1.352417.7923584-.39263917.48413086-.61077882 1.27648926-1.04699708 1.49658203-2.35583496 1.01245117-4.66802978 1.10046387-6.80566406-.7923584-.47991943-.35217285-1.0470581-.39611816-1.57055664-.57226562.17449951.48425293.17449951 1.10046387.30535889 1.5847168 1.00341796 2.68505859 2.66119384 3.96166992 5.54052734 3.87365722 1.83227539 0 3.70825195 1.1003418 5.54052734 1.67260742zM24.9587227 198.57410063c.95977783 2.81713867 2.00680542 5.67834472 2.96658325 8.4954834-2.82943726.79113769-3.368042-1.2130127-3.88458252-3.13500977-.14453125-.53771973-.28729248-1.06896973-.47802734-1.5308838-.45495606-1.147583-.96368409-2.2770996-1.4723816-3.40637206-1.73516845-3.85229492-3.46957397-7.70288086-3.0647583-12.26416016.08728028-.7043457.52352906-1.40856933.7416687-2.11291504.52349854.61621094 1.17788697 1.18847657 1.48327637 1.89282227 1.26516724 4.04968262 2.4430542 8.05529785 3.70822144 12.06103516z"/>
                                        <path fill="rgb(255,255,255)" fill-rule="evenodd" d="M97.29081498 148.56933988c1.57055664.48425293 3.09747315.92443848 4.66796875 1.40856934-1.3959961-.8803711-2.87927246-1.67260742-4.10083007-2.72912598-.65441895-.39611816-1.09063721-.9243164-1.70141602-1.49658203.74163818-.44018555 1.3959961-1.23254394 2.22491455-1.32055664 4.01361084-.57226562 6.58758545 1.40856934 5.84588623 4.40185547-.08721924.48413086-1.17785644.70422363-1.91955566 1.27648926-.43743897 2.53808593-2.06304932 2.30969238-3.45111084 2.1147461-.27301026-.03833009-.5368042-.07543946-.78057862-.08984376-5.84594726-.08813476-11.16827392 1.18847656-15.61816406 5.59033203-.34899902.39611817-.6107788.9243164-.95977783 1.32055664.22912598.0164795.46435547.07629395.69647217.13537598.38677978.09838867.76507568.19470215 1.09222412.08459473 1.5704956-.52819825 3.14105224-1.0123291 4.53710937-1.8046875 4.05718994-2.02478028 8.4197998-2.42102051 12.86968994-2.02478028 1.5269165.04394532 3.01019288.83630371 4.58074952 1.32043457.1744995-1.40856933.30535888-2.90515136.52349853-4.3137207.30541992-2.4210205.69799805-4.9741211 1.04699707-7.3951416.13092041-1.0123291.52355957-1.9807129.74169922-2.99316406.87249756.70422363 2.26855469 1.23254394 2.57391357 2.11279296.15240479.50317383.31793213 1.00195313.48309327 1.49938965.87512207 2.63598633 1.73834228 5.23632813.56396484 8.27270508-.32971191.73181152.73571777 2.11706543 1.69012451 3.3581543.30865479.40136719.60565186.78759765.84014893 1.13171387.04364013.17614746 1.5269165-.30810547 1.61419677-.61621094.1369629-.66601563.34509278-1.38220215.55523682-2.10559082.52612305-1.81079102 1.06530762-3.66662598.5354004-4.89331055-3.62097169-7.79125977-7.19830323-15.9786377-14.74560548-20.46850586-.18737793-.10803223-.37530517-.21716308-.5639038-.32653808-3.49945069-2.0308838-7.2154541-4.18737793-11.52056885-2.18249512-.61071778.30810547-1.04699707.8363037-1.48327637 1.32055664.4362793.30810547.8725586.83630371 1.39605713 1.0123291 1.61413574.30822754 3.27191162.39624023 4.8861084.7923584 4.71160888 1.27648926 8.50708008 4.09375 10.86291504 8.75964355.27893066.56298828-.01287842 1.41381836-.3166504 2.29956055-.17126464.49938965-.34631347 1.0098877-.42498779 1.48596191-2.22497558-1.05639648-4.75524902-1.67260742-6.58752441-3.16931152-8.11450195-6.69067383-17.6685791-9.11169434-27.5281372-9.99206543-7.3291626-.616333-14.4838257 0-21.90026856 3.477417-13.13146973 6.16259765-23.47085572 14.34997558-27.48446656 29.44824218-.55630493 2.08691406-1.41577148 4.07971191-2.27645874 6.07531738-1.77163696 4.10778809-3.54840088 8.22753907-2.69689941 13.20471192.25289917 1.54455566.34335327 3.10961914.4336853 4.67260742.20574951 3.55969238.41085816 7.10876465 2.53286743 10.3815918 1.26516724 1.98083496 1.39605713 4.79797363 2.35583497 7.17504882.65438842 1.8046875 1.57052612 3.60949707 2.66119384 5.1060791 3.18469239 4.09375 6.5439148 8.09936524 9.85949707 12.10498047 3.18469239 3.69763184 5.84588623 9.1558838 9.7722168 10.56445313 6.28216553 2.28894043 11.7354126 6.91088867 18.7156372 7.08691406 2.13775635.07946778 4.27941895.21850586 6.41918946.35742188 4.97784424.32324218 9.94494629.64575195 14.8267212.21484375 5.40960693-.48425293 10.68841552-2.99328614 15.92352294-4.66601563.6107788-.2199707 1.57055664-1.0123291 1.57055664-1.1003418-1.4121704-3.0484619.21643067-3.42797851 1.83380127-3.80493164.53118897-.12365722 1.0610962-.24719238 1.48175049-.46484375.6107788-.30822753 1.352417-.5283203 1.78869629-1.01245117 3.31555176-3.74157715 6.71838379-7.43908691 9.7722168-11.35668945 2.09405517-2.64111328 4.75524902-5.6784668 4.97338867-8.75964355.4362793-4.93005372 3.18469238-6.99890137 6.67480468-8.80371094 7.72180176-3.91760254 6.8493042-16.59484864 1.352417-20.38049317-2.31219483-1.58459472-4.79888916-2.5970459-4.8861084-6.07446289 0-.39624023-.65441895-.7043457-.95977783-1.10046386-.13092041.52819824-.13092041 1.01245117-.34906006 1.40856933-1.88458252 3.63781738.50158691 5.52856445 2.56964111 7.16723633.13409424.10620117.2668457.21142578.39697266.31591797 6.80566406 5.59033203 5.3223877 11.53271484.08721924 16.55078125-.52349854.57226562-1.352417.8803711-2.0067749 1.27661133-.17449952-.7923584-.3053589-1.4967041-.3053589-2.28894043.21807862-6.11853028 0-11.97302246-5.10430908-16.28686524-1.13427734-.8363037-1.48327636-2.72912597-2.31213378-4.00561523-.65441895-.92443848-1.57055665-1.84875488-2.4430542-2.4210205-.74169922-.44018556-1.70147705-.44018556-2.57397461-.61621095.4362793.74829102.65441894 1.8046875 1.26513672 2.42102051 2.1376953 1.98083496 3.40283203 5.06201172 2.00683593 7.08691406-1.35241699 1.93676758-4.44989013 2.72912598-6.98016357 3.52148438-2.96661377 1.0123291-6.06402588 1.40856933-9.11785889 2.20092773-.78527832.1760254-1.39605713.79223633-2.13769531 1.27648926.23028564.14196777.45684814.31811523.68292236.49377441.54486084.42346192 1.08709717.8449707 1.6729126.78271485 6.8928833-.39611817 14.09118652-.22009278 19.19543457-6.60266113.22790527-.2956543.8685913-.24816895 1.45111084-.20495606.19818115.01464844.3895874.0288086.5557251.0288086-.4362793 2.28894042-.30541992 5.06213378-1.48327637 6.77880859-1.65783691 2.3770752-4.23175049 3.91760254-6.45666504 5.8984375-.30541992.22009277-.39263916.7043457-.6107788 1.10046387.11029052.02233886.23449706.05578613.36346435.09057617.38134766.10290527.80438232.21704101 1.03259277.08557129 2.09399414-1.5847168 4.14447022-3.12536621 6.2385254-4.79797364.43621825-.39624023.82885741-1.01245117 1.17785644-1.4967041.05871582.1776123.1331787.36169434.20812988.546875.20373535.5032959.41107178 1.015625.31542969 1.43395996-.9161377 4.79797364-1.4833374 9.81604004-3.053833 14.39404297-1.352417 3.82958985-3.49011231 7.52709961-5.93316651 10.69641113-1.91955567 2.5970459-4.84246826 4.48986817-7.41644287 6.47070313-1.48327637 1.10046387-3.62097168 1.23254394-5.10424805 2.4210205-5.36602783 4.44580079-11.47369385 7.04284669-17.93035889 7.96728516-12.25891113 1.89282227-24.1251831-.7923584-34.85723877-7.17504882-4.01361084-2.33288575-6.93652343-6.82275391-9.99035644-10.69641114-2.35583496-2.99328613-4.58074951-6.38269043-5.84591675-9.9921875-2.53030396-7.26293945-4.44985962-14.79003906-6.36941528-22.36120605-.16168213-.6525879-.34887696-1.33093262-.53955079-2.02197266-.83834838-3.038208-1.74502563-6.3239746-.85647583-8.76257324 2.87930298-8.23132324 7.19830323-16.022583 13.69857789-21.7890625.72937011-.64160156 1.45251464-1.30566406 2.1786499-1.97241211 4.35498047-3.9991455 8.81542969-8.09521484 15.35906982-8.01965332.30230713.06103516.64648438-.25854492.97454834-.56298828.1453247-.1348877.28753662-.2668457.42144776-.3614502-.61071778-.26403808-1.17785645-.57226562-1.78863526-.57226562-.51617431.0612793-1.10095215.23449707-1.67541504.40466308-1.07641601.31884766-2.11639404.62683106-2.59997558.16760254-1.70135498-1.51708984-2.82855225-.82543945-4.130188-.02685547-.13354491.08190918-.26892089.16503907-.40692138.24694825-7.54730224 4.31384277-13.04418945 10.96057129-17.93029785 18.26757812-.4362793.7043457-.82891846 1.4967041-1.26516724 2.20092774-.04278564-.35961914-.1321411-.74267579-.22088623-1.12329102-.1828308-.78381348-.36309814-1.55664062-.12811279-2.09008789 1.8322754-3.3894043 3.75183106-6.7788086 6.06402588-9.85998535 1.17788696-1.6727295 3.09744263-2.77319336 4.580719-4.2697754.32470702-.32348632.64331054-.64819335.95916747-.9699707 3.07946778-3.13757324 5.89526368-6.00646972 11.4743042-4.92858886 3.46337891.70507812 7.18066407-.14819336 10.88659668-.99890137 1.61572266-.3708496 3.22930909-.741333 4.81878662-.98181152.65441895-.04406739 1.22155762-.39624024 1.8322754-.61633301-.65435792-.57226563-1.352417-1.58459473-2.0067749-1.6727295-2.2576294-.13208007-4.58892823-.1154785-6.92022706-.09899902-.77703857.00549317-1.55413818.01098633-2.3284912.01098633-1.17791749 0-2.35583497-.22009277-3.53375245-.39611816 1.26519775-.61621094 2.35583496-1.49658203 3.70825195-1.89282227.20043946-.06359863.40765381-.13244629.61950684-.20288086 1.40161133-.46582031 3.0045166-.99853515 4.17932129-.50134277 7.32922363 3.08117676 16.01080322.66027832 22.81646728 6.07446289.40338135.3112793 1.0649414.12768555 1.77404785-.06921387.59454346-.16491699 1.22247315-.3392334 1.7597046-.2388916 2.70477294.48425293 5.45324706 1.27648926 8.20166015 1.98083496.47991943.1760254.91619873.57226563 1.352417.7923584-.39263917.48413086-.61077882 1.27648926-1.04699708 1.49658203-2.35583496 1.01245117-4.66802978 1.10046387-6.80566406-.7923584-.47991943-.35217285-1.0470581-.39611816-1.57055664-.57226562.17449951.48425293.17449951 1.10046387.30535889 1.5847168 1.00341796 2.68505859 2.66119384 3.96166992 5.54052734 3.87365722 1.83227539 0 3.70825195 1.1003418 5.54052734 1.67260742zM24.9587227 198.57410063c.95977783 2.81713867 2.00680542 5.67834472 2.96658325 8.4954834-2.82943726.79113769-3.368042-1.2130127-3.88458252-3.13500977-.14453125-.53771973-.28729248-1.06896973-.47802734-1.5308838-.45495606-1.147583-.96368409-2.2770996-1.4723816-3.40637206-1.73516845-3.85229492-3.46957397-7.70288086-3.0647583-12.26416016.08728028-.7043457.52352906-1.40856933.7416687-2.11291504.52349854.61621094 1.17788697 1.18847657 1.48327637 1.89282227 1.26516724 4.04968262 2.4430542 8.05529785 3.70822144 12.06103516z"/>
                                        <path fill="rgb(255,255,255)" fill-rule="evenodd" d="M93.80072738 215.30111728c.74164385 0 1.09065273-.08803657 1.4832877-.08803657-1.0470266 3.21333479-2.13767933 6.29461473-5.23513307 7.96730955-11.34278832 6.1185416-22.81645496 7.879273-34.81363492 2.68511538-.21813054-.17607314-.43626109-.22009142-.65439163-.308128-.9597744-.61625598-2.00680101-1.27653025-2.96657541-1.89278624 1.39603549-.39616457 2.87932319-1.27653026 4.14448035-1.01242055 3.62096704.70429255 7.24193408 2.99324337 10.64477058 2.68511537 8.59434345-.79232913 17.84307855-.17607314 24.51787321-8.01132784.69801775-.83634741 1.65779214-1.36456683 2.8793232-2.0248411"/>
                                        <path fill="rgb(255,255,255)" fill-rule="evenodd" d="M122.15769819 167.14511365c.65439163-1.98082282 1.17790494-4.09370049 2.4430621-5.28219418 1.83229657-1.67269482 4.27535867-2.68511538 6.50029023-3.91762735.87252217-.48420113 2.13767933-1.32054855 2.74844486-1.01242055 1.83229657 1.01242055 3.49008871 2.50904223 5.01700252 3.87360906.08725222.08803657-.5235133 1.49662169-1.04702661 1.71671311-3.18470595 1.67269483-6.28215969 3.4774445-9.64137007 4.6659382-1.70141825.5722377-3.83909759.08803657-6.02040303-.04401829"/>
                                        <path fill="rgb(255,255,255)" fill-rule="evenodd" d="M94.06248404 164.76812627c.74164385.22009142 1.39603548.17607314 1.83229657.48420113 1.4832877.8803657 2.87932319 1.80474968 4.27535868 2.77315195-1.9195488.22009142-4.44986311 1.49662168-5.75864638.70429256-5.01700253-2.99324337-10.51389225-3.7855725-16.01078198-4.6659382-.5235133-.08803657-1.04702661-.79232912-1.57053992-1.18849369.82889607-.39616456 1.70141825-1.01242055 2.53031432-1.01242055 5.06062863-.39616456 9.94675283.17607314 14.7019987 2.9052068"/>
                                        <path fill="rgb(255,255,255)" fill-rule="evenodd" d="M95.50214563 188.8021098c-1.57053992 0-2.87932319-.08803657-4.14448035-.308128-.08725222 0-.13087832-1.40858511.13087833-1.67269482.9597744-.79232913 2.13767934-1.32054855 3.27195817-2.0248411 2.66119264-1.71671311 5.32238529-3.38940794 5.01700253-7.48310843-.08725222-1.18849369.9597744-2.42100566 1.57053992-3.69753592.65439163 1.32054854 1.78867046 2.5970788 2.006801 4.00566392.61076553 4.70995647-2.74844485 6.99890729-5.71502026 9.37589467-.65439164.52821942-1.30878327 1.01242055-2.13767934 1.80474968"/>
                                        </g>
                                    </g>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-md-7">
                    <h2 class="recipe-method-headline">Method</h2>
                    <div class="recipe-method" v-html="recipe.method"></div>
                </div>
                <div class="col-12 d-flex recipe-buttons-wrapper justify-content-end mt-5" v-if="isUserRecipe">
                    <div class="recipe-edit">
                        <a class="btn btn-secondary" @click="editRecipe()">Edit</a>
                    </div>
                    <div class="recipe-delete">
                        <button class="btn btn-secondary" data-bs-toggle="modal" data-bs-target="#deleteModal">Delete</button>
                    </div>
                </div>
                <div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h3 class="modal-title" id="deleteModalLabel">Are you sure you want to delete this recipe?</h3>
                            </div>
                            <div class="modal-body">
                                When you delete your recipe all information will be deleted.
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-danger" @click="deleteRecipe()">Yes, delete it!</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal fade weekly-plan-modal" id="weeklyPlanModal" tabindex="-1" aria-labelledby="weeklyPlanModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content" v-if="isUserLoggedIn">
                            <button type="button" class="btn-close mb-2" data-bs-dismiss="modal" aria-label="Close"></button>
                            <alert :classes="modalAlert.type" :text="modalAlert.text" v-if="modalAlert.text"/>
                            <div class="modal-header">
                                <h3 class="modal-title">Add to weekly plan</h3>
                            </div>
                            <div class="modal-body">
                                <p>Add this recipe to your weekly plan. If you want to remove it from your current weekly plan use this remove button.</p>
                                <multiselect v-model="weeklyPlanDayValue" :options="weeklyPlanDays" :allowEmpty="false" track-by="weekday" label="weekday"  class="mt-3" :searchable="false" open-direction="bottom" :close-on-select="true" :show-labels="false" placeholder="Select Day"></multiselect>
                                <multiselect v-model="weeklyPlanMealValue" :options="weeklyPlanMeals" :allowEmpty="false" class="mt-3" track-by="meal" label="meal" :searchable="false" open-direction="bottom" :close-on-select="true" :show-labels="false" placeholder="Select Meal"></multiselect>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-primary" @click="addToWeeklyPlan()">Save changes</button>
                            </div>
                            <div class="bg-orange">
                                <svg id="Ebene_1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 132.00003 134.48258"><path class="cls-1" d="M38.67272,41.67267c6.22879-4.7299,12.16921-9.40212,18.28265-13.84361,1.44185-1.09595,3.34509-1.21132,5.07531-1.84582-.92278,1.49973-1.49952,3.34554-2.76835,4.55686-7.72831,6.92181-15.57197,13.72825-23.35796,20.53469-.28837,.23073-1.90324-.51913-2.01859-.98059-.51907-3.98004,1.44185-6.40267,4.78694-8.42153"/><path class="cls-1" d="M110.13077,92.77867c-.28837,1.84582-.2307,3.34554-.80743,4.44149-.28837,.6345-1.61487,.74986-2.53765,.86523-.2307,0-.63441-1.269-.69209-2.07654-.11535-1.09595-.28837-2.13422,0-3.11481,.40372-1.49973,1.0958-2.99945,1.73022-4.44149,.69209,1.15363,1.49953,2.48032,2.30696,4.32613"/><path class="cls-1" d="M42.76757,126.46479c.69209,.74986,1.49952,1.269,1.61487,1.84582,.28837,2.07654,.40372,4.0954,.51907,6.17195-.80743-.23073-2.13394-.23073-2.36463-.74986-.80743-2.42264-3.57579-5.01831,.2307-7.2679"/><path class="cls-1" d="M62.03068,72.99384c-1.09581,.86523-1.90324,1.38436-2.76835,2.07654,.11535-1.96118-.28837-4.21076,.40372-5.71049,.51907-.98059,2.76835-.86523,4.26788-1.269-.11535,1.09595,0,2.13422-.28837,3.23018-.17302,.46146-.86511,.9229-1.61487,1.67277"/><path class="cls-1" d="M32.09789,100.50802c1.3265-1.38436,2.36463-2.59568,3.46044-3.57626,.28837-.34609,1.49952-.34609,1.61487,0,.40372,.51913,.63441,1.61509,.28837,2.07655-1.3265,1.96118-2.76835,3.69163-4.26787,5.53745-.40372-1.32668-.92278-2.48032-1.09581-4.03772"/><path class="cls-1" d="M56.95537,110.77537c-.69209,.34609-1.44185,.51913-1.73022,.23073-1.44185-1.09595-2.76835-2.36495-4.03718-3.57626,1.21115-.23073,2.53765-.86523,3.63346-.51913,1.49952,.40377,2.94137,1.61509,4.38322,2.48032-.57674,.40377-1.3265,.74986-2.24929,1.38436"/><path class="cls-1" d="M107.07405,115.44759c.2307-1.21132,.28837-1.96118,.69209-2.36495,1.03813-.86523,2.24928-1.61509,3.46044-2.36495-.40372,1.96118-.69209,3.80699-1.3265,5.59512,0,.23073-1.7879-.23073-2.82603-.86523"/><path class="cls-1" d="M66.12553,133.50197c-1.03813,.51913-1.84557,.74986-2.653,.98059,.11535-1.73045,.11535-3.34554,.51907-4.96063,.11535-.51913,1.3265-.63451,1.90324-.98059,.40372,.98059,.92278,1.96118,1.0958,2.94177,.17302,.46146-.34605,1.15364-.86511,2.01886"/><path class="cls-1" d="M97.96156,72.24397c-1.44185-.23073-2.82603-.74986-4.03718-1.73045-.2307-.23073,.40372-1.73045,.69209-2.59568,1.0958,1.21132,2.19161,2.48032,3.34509,4.32613"/><path class="cls-1" d="M77.31428,63.24563c-1.0958-.34609-1.90324-.86523-2.76835-1.49973,.40372-.40377,.92278-.98059,1.3265-1.38436,.63441,.86523,1.0958,1.73045,1.44185,2.88409"/><g><path class="cls-1" d="M21.02451,134.07877c-1.84558-4.32611-1.90326-9.63281-2.24933-14.59344-.40369-6.80646-2.13391-10.15198-6.1134-10.67114,1.03815,3.57629,2.01855,7.21027,2.94135,10.90186,.14246,.3205,.02112,.72888-.10614,1.15729-.07892,.26562-.16016,.539-.18219,.80389-.69214-.34607-1.84558-.40375-2.01862-.98059-.21899-.48181-.4527-.96271-.68701-1.4447-1.61682-3.32611-3.25824-6.70288-.23578-10.78381,.04828-.89294-.08521-1.79596-.21454-2.67102-.17975-1.21661-.35156-2.37915-.01617-3.38556,.34216-1.02655,.76715-2.03503,1.19055-3.03961,1.57483-3.73688,3.1272-7.42035,.30902-11.78461-.69214-1.2113-.63446-3.11481-.92279-4.72986-1.21118,1.09595-2.76837,1.96118-3.63348,3.34552-2.76837,3.57623-3.74878,28.84088-1.49951,32.93628,1.73022,3.11481,3.34509,6.34497,5.07532,9.63281,.95203,1.84076,1.78668,3.83398,2.74402,5.71051h5.83527c-.06848-.13611-.15509-.26489-.21655-.40381Z"/><path class="cls-1" d="M9.83572,80.72318c1.21118-.23071,2.53766-.34607,3.57581,0,4.47382,1.78973,8.56329,.60114,12.79456-.62866,.40527-.1178,.81189-.23596,1.22021-.35193,13.20734-3.80695,23.58862-12.11316,31.83606-23.01495,.1969-.25958,.39276-.51874,.58789-.77698,4.83514-6.39764,9.23761-12.22278,18.32916-9.89417,2.36462,.63452,4.78693,1.2113,7.20923,1.09595,6.63251-.23071,12.16919,2.36493,17.30219,6.57574,4.78693,4.0954,12.16919,5.53741,12.3999,14.24738,.11536,.98059,1.21112,1.96118,1.73022,2.99945,2.94135,6.57568,6.80554,12.97839,8.42041,19.95789,1.13831,4.87262,.80273,10.14075,.46912,15.37891-.08893,1.39655-.17773,2.79095-.23846,4.17517-.41571,8.76929-2.75037,16.88763-6.81775,23.99561h5.74506c.35242-.82953,.70728-1.65802,1.07269-2.48035,6.63251-14.93958,8.82416-30.802,3.69116-46.49146-4.26788-12.74768-9.3432-25.03387-20.30127-34.32062-8.13202-6.80646-16.89844-9.51746-26.01093-12.22852-2.53766-.86523-3.74878-1.49976-4.26788-4.21075-1.49951-8.1908-3.34509-16.43933-4.95996-24.74548-.40369-1.84583-.28839-3.86469-1.09583-5.42206-.17505-.34259-.33911-.69629-.50226-1.0481-1.07318-2.3139-2.11005-4.54938-6.01489-3.0473-1.99756,.79156-4.24139,.64709-6.5224,.50024-1.20941-.07788-2.42914-.15643-3.62817-.0965-.92279,.11536-1.73022,1.2113-2.53766,1.84583,.80743,.86523,1.61487,1.96118,2.65295,2.36493,1.61493,.63452,4.15253,.34613,4.95996,1.3844,.53986,.836,1.11389,1.66278,1.68854,2.49048,3.23175,4.65485,6.4837,9.33881,3.79053,15.85229-3.63348,9.17139-7.09393,18.57349-11.47711,27.34113-1.90326,3.98004-5.47906,8.42151-9.22784,9.74823-3.94983,1.49103-7.69812,3.61267-11.45007,5.73639-7.42426,4.20227-14.86249,8.41248-23.90405,7.76111-1.20514-.07532-2.43481,.16907-3.65729,.41205-.64941,.12909-1.29675,.25775-1.93713,.33783,.40375-2.07654,.80743-4.0954,1.32654-6.17194,.11536-.63452,.40369-1.26904,.69208-1.96118,7.09387-16.32391,19.72449-27.34113,33.33557-36.74329,6.51715-4.44147,14.3031-6.46033,21.57007-9.74817,.44183-.21136,1.09491,.07654,1.74396,.36261,1.29913,.57275,2.58173,1.13818,2.12018-2.32379-.56287-3.53131-2.98718-3.0213-4.89636-2.61969-.24261,.05103-.47693,.10034-.698,.13934-4.15253,.63452-8.65112,1.3844-12.3999,3.23016-8.53577,4.21082-16.78314,9.17145-25.03052,13.95898-1.84558,1.09595-3.74884,2.36499-5.07532,4.0954-7.03619,9.2868-12.68829,19.55414-16.14868,31.09045-3.05676,10.03662-.92279,12.86304,8.53571,11.24792Zm58.5968-41.24243c.23065-3.46088,.6344-6.92175,1.03809-10.26733,0-.40375,.28839-.86523,.5191-1.26898,.69208,.34607,1.9032,.74988,2.01855,1.2113,.28839,3.69165,.28839,7.44098,.5191,11.24792-2.4223,1.9035-4.26788,3.11481-4.09485-.92291Z"/></g></svg>
                            </div>
                        </div>
                        <modal-login-content v-if="!isUserLoggedIn" headline="Login to start your weekly plan" />
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>
<script>
    import ModalLoginContent from '../component/ModalLoginContent';
    export default {
        components: {
            ModalLoginContent,
        },
        data() {
            return {
                recipe: {
                    id: "",
                    name: "",
                    prepTime: "",
                    imageName: "",
                    portion: 1,
                    method: '',
                    difficulty: '',
                    enabled: false,
                    tags: [],
                    ingredients: [
                        {
                            baseValue: '',
                        }
                    ],
                },
                weeklyPlanDays: [
                    { weekday: 'monday', weekDaySort: 1 },
                    { weekday: 'tuesday', weekDaySort: 2 },
                    { weekday: 'wednesday', weekDaySort: 3 },
                    { weekday: 'thursday', weekDaySort: 4 },
                    { weekday: 'friday', weekDaySort: 5 },
                    { weekday: 'saturday', weekDaySort: 6 },
                    { weekday: 'sunday', weekDaySort: 7 }
                ],
                weeklyPlanDayValue: '',
                weeklyPlanMealValue: '',
                weeklyPlans: [],
                weeklyPlanMeals: [
                    { meal: 'breakfast', mealSort: 1 },
                    { meal: 'lunch', mealSort: 2 },
                    { meal: 'dinner', mealSort: 3 },
                    { meal: 'snack', mealSort: 4 }
                ],
                user: '',
                likedRecipe: false,
                isUserRecipe: false,
                isUserLoggedIn: false,
                alert: {
                    type: '',
                    text: '',
                },
                modalAlert: {
                    type: '',
                    text: '',
                }
            }
        },

        created() {
            this.$axios
            .get(`/api/recipe/${this.$route.params.id}`)
            .then((response) => {
                if (response.data.weeklyPlans) {
                    this.weeklyPlans = JSON.parse(response.data.weeklyPlans);
                }

                this.recipe = JSON.parse(response.data.recipe);
                this.user = this.recipe.userId;
                this.isUserRecipe = response.data.isUserRecipe;
                this.isUserLoggedIn = response.data.isUserLoggedIn;
                
                if (this.recipe.likedUsers.find(user => user.id === this.isUserLoggedIn)) {
                    this.likedRecipe = true;
                } else {
                    this.likedRecipe = false;
                }

                this.recipe.ingredients.forEach(ingredient => {
                    if (this.recipe.portion) {
                        ingredient.baseValue = ingredient.quantity / this.recipe.portion;
                        return ingredient.baseValue;
                    }
                });

                if (this.recipe.enabled == false & this.isUserRecipe == true) {
                    this.alert.type = "alert-warning";
                    this.alert.text = "This recipe is not enabled yet. An admin needs to approve it. You can still see it & add it to your weekly plan.";
                } else {
                    this.alert.type = "";
                    this.alert.text = "";
                }
            })
            .catch((e) => {
                this.alert.type = "alert-danger";
                this.alert.text = e.response.data.detail;
            });
        },
        watch: {
            weeklyPlans(newPlans, oldPlans) {
                this.weeklyPlans = newPlans;
            }
        },

        methods: {
            addToWeeklyPlan() {
                if (this.weeklyPlanDayValue === '' || this.weeklyPlanMealValue === '') {
                    this.modalAlert.type = "alert-danger";
                    this.modalAlert.text = "Please fill in all fields.";
                    return;
                } else {
                    this.modalAlert.type = "";
                    this.modalAlert.text = "";
                }
                let exsistingWeeklyPlan = '';
                if (this.weeklyPlans.length > 0) {
                    this.weeklyPlans.forEach(weeklyPlan => {
                        if (weeklyPlan.weekday === this.weeklyPlanDayValue.weekday && weeklyPlan.meal === this.weeklyPlanMealValue.meal) {
                            exsistingWeeklyPlan = weeklyPlan.id;
                        }
                    });
                }
                this.$axios
                    .post('/api/weekly-plan/update/', {
                        day: this.weeklyPlanDayValue,
                        meal: this.weeklyPlanMealValue,
                        recipeId: this.recipe.id,
                        id: exsistingWeeklyPlan,
                    }).then((response) => {
                        this.modalAlert.type = "alert-success";
                        this.modalAlert.text = "Recipe added to weekly plan.";
                        this.weeklyPlanDayValue = '';
                        this.weeklyPlanMealValue = '';

                        setTimeout(() => {
                            this.modalAlert.type = "";
                            this.modalAlert.text = "";
                            const myModalEl = document.getElementById('weeklyPlanModal')
                            const modal = bootstrap.Modal.getInstance(myModalEl)
                            modal.hide();
                        }, 500);

                        // better solution for this
                       this.weeklyPlans.push(response.data);
                    }).catch((e) => {
                        this.alert.text = e.response.data.detail;
                        this.alert.type = "alert-danger";
                    });
            },
            updatePortion() {
                if (this.recipe.portion < 1) {
                    this.recipe.portion = 1;
                }

                this.recipe.ingredients.forEach(ingredient => {
                    if (ingredient.baseValue) {
                        ingredient.quantity = this.recipe.portion * ingredient.baseValue;
                    }
                });
            },
            addPortion() {
                this.recipe.portion++;
                this.recipe.ingredients.forEach(ingredient => {
                    if (ingredient.baseValue) {
                        ingredient.quantity = this.recipe.portion * ingredient.baseValue;
                    } else {
                        ingredient.quantity = this.recipe.portion * ingredient.quantity;
                    }
                });
            },
            toggleLikeRecipe() {
                this.$axios
                .post(`/api/recipe/${this.$route.params.id}/like`)
                .then((response) => {
                    this.recipe = response.data;

                    if (this.recipe.likedUsers.find(user => user.id === this.isUserLoggedIn)) {
                        this.likedRecipe = true;
                    } else {
                        this.likedRecipe = false;
                    }
                })
                .catch((e) => {
                    this.alert.text = e.response.data.detail;
                    this.alert.type = "alert-danger";
                });
            },

            removePortion() {
                if (this.recipe.portion > 1) {
                    this.recipe.portion--;
                    this.recipe.ingredients.forEach(ingredient => {
                        if (ingredient.baseValue) {
                            ingredient.quantity = this.recipe.portion * ingredient.baseValue;
                        }
                    });
                }
            }, 
            deleteRecipe() {
                this.$axios.delete(`/api/recipe/${this.recipe.id}/cancelRecipe`).then(() => {
                    this.$router.push({ name: 'recipes'});
                    document.querySelector('.modal-backdrop').remove();
                    document.body.classList.remove('modal-open');
                    document.body.style.paddingRight = '';
                    document.body.style.overflow = '';
                });
            },

            editRecipe() {
                this.$router.push({ name:'editRecipe', params: {id: this.recipe.id}});
            },
        }
    }
</script>